\doxysection{Morphism.\+h}
\hypertarget{_morphism_8h_source}{}\label{_morphism_8h_source}\index{Unit/Character/Skills/Morphism/Morphism.h@{Unit/Character/Skills/Morphism/Morphism.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Created\ by\ sakhd\ on\ 19.11.2023.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#ifndef\ GAMELAB3\_MORPHISM\_H}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ GAMELAB3\_MORPHISM\_H}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}../../../../Game/Game.h"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}../Skills.h"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}../../../../Dungeon/Dungeon.h"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_morphism}{Morphism}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_skill}{Skill}}\ \{}
\DoxyCodeLine{00018\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordtype}{int}\ skillRange\ =\ 10;\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{bool}\ check(Move\ side,\ \textcolor{keywordtype}{int}\ ax,\ \textcolor{keywordtype}{int}\ ay,\ \textcolor{keywordtype}{int}\ bx,\ \textcolor{keywordtype}{int}\ by)\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (side\ ==\ Move::right)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ax\ <=\ bx)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (side\ ==\ Move::left)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ax\ >=\ bx)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (side\ ==\ Move::up)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ay\ <=\ by)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (side\ ==\ Move::down)\ \{\ \textcolor{keywordflow}{if}\ (ay\ >=\ by)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_morphism_a272c8c8a0097a31ead334982e6ea7bda}{Morphism}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_skill_a8ce91c1120a6e8cef5ee1aa2e785380d}{manaCost}})\ :\ \mbox{\hyperlink{class_skill}{Skill}}(\mbox{\hyperlink{class_skill_a8ce91c1120a6e8cef5ee1aa2e785380d}{manaCost}})\ \{\};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_morphism_a4e19f748bb9c5c593205c7aa071fa7fc}{useSkill}}(\mbox{\hyperlink{class_dungeon}{Dungeon}}\ \&dungeon,\ \textcolor{keywordtype}{int}\ mas[])\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_skill_a3289631b5603b660314d5d449596b252}{skillLvl}}\ ==\ 0)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ std::string\ nameMorph\ =\ \mbox{\hyperlink{class_game_af5be431806a6d32d062c31730e2962bb}{Game::allTypesEnemies}}[mas[0]];}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ (!dungeon.getHero().first-\/>isOpenEnemy(nameMorph))\ return\ -\/2;}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>getCharacteristics().getCurMana()\ <\ \mbox{\hyperlink{class_skill_a8ce91c1120a6e8cef5ee1aa2e785380d}{manaCost}}\ *\ \mbox{\hyperlink{class_skill_a3289631b5603b660314d5d449596b252}{skillLvl}})\ \textcolor{keywordflow}{return}\ -\/3;}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ Move\ side\ =\ dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>getSideLooking();}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>getCoords().first;}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>getCoords().second;}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_enemy}{Enemy}}\ *enemy\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ h\ =\ 10000000;}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ item\ =\ dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().begin();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (item\ =\ dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().begin();\ item\ !=\ dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().end();\ ++item)\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (check(side,\ x,\ y,\ item-\/>first-\/>getCoords().second,\ item-\/>first-\/>getCoords().first)\ \&\&}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ abs(item-\/>first-\/>getCoords().second\ -\/\ x)\ +\ abs(item-\/>first-\/>getCoords().first\ -\/\ y)\ <\ h\ \&\&}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (item-\/>first-\/>getFaction()\ ==\ Faction::character\ ||\ item-\/>first-\/>getFaction()\ ==\ Faction::undead))\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>isOpenEnemy(\textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_undead}{Undead}}\ *\textcolor{keyword}{>}(item-\/>first)-\/>\mbox{\hyperlink{class_undead_a78eff531fa9b16f6c8999fffd62c1b74}{getNameLiving}}())\ \&\&}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item-\/>first-\/>getName()\ !=\ nameMorph)\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ h\ =\ abs(item-\/>first-\/>getCoords().second\ -\/\ x)\ +\ abs(item-\/>first-\/>getCoords().first\ -\/\ y);}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enemy\ =\ item-\/>first;}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (...)\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (enemy\ ==\ \textcolor{keyword}{nullptr})\ \textcolor{keywordflow}{return}\ -\/4;}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (h\ >\ skillRange)\ \textcolor{keywordflow}{return}\ -\/5;}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nameMorph\ ==\ \textcolor{stringliteral}{"{}undead"{}}\ \&\&\ dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>isOpenEnemy(\textcolor{stringliteral}{"{}livingEnemy"{}}))\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().push\_back(}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\textcolor{keyword}{new}\ \mbox{\hyperlink{class_undead}{Undead}}(10,\ enemy-\/>\mbox{\hyperlink{class_unit_aef7e54106b15766c4fb02506b5696522}{Damage}}(),\ enemy-\/>\mbox{\hyperlink{class_unit_a197100c1fcc005df5127de899f5b8329}{getCoords}}(),\ \textcolor{stringliteral}{"{}undead"{}},}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}livingEnemy"{}},}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enemy-\/>\mbox{\hyperlink{class_enemy_a5970616d8efe048e0be00f89e0cd1172}{getMaxHp}}(),\ enemy-\/>\mbox{\hyperlink{class_enemy_af409040ad718a0134a9d992226eef73a}{getCurHp}}()),}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(dungeon.\mbox{\hyperlink{class_dungeon_a9f1ba89786b66b244b1f6619112f60e2}{getMapLevel}}()[enemy-\/>\mbox{\hyperlink{class_unit_a197100c1fcc005df5127de899f5b8329}{getCoords}}().second][enemy-\/>\mbox{\hyperlink{class_unit_a197100c1fcc005df5127de899f5b8329}{getCoords}}().first])\});}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ (-\/-\/dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().end())-\/>first-\/>setHeap(\textcolor{keyword}{true});}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ (-\/-\/dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().end())-\/>first-\/>setFaction(enemy-\/>\mbox{\hyperlink{class_unit_a34b363b0e3f4bbfcfc650ffd9087de60}{getFaction}}());}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ enemy-\/>\mbox{\hyperlink{class_enemy_afad764b00a84735def86b410b4695a98}{die}}();}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ enemy-\/>\mbox{\hyperlink{class_enemy_a41f96e23f90b6c54499e4e7286b39b9e}{methodAfterDie}}(dungeon);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>getCharacteristics().mana(\mbox{\hyperlink{class_skill_a8ce91c1120a6e8cef5ee1aa2e785380d}{manaCost}}\ *\ \mbox{\hyperlink{class_skill_a3289631b5603b660314d5d449596b252}{skillLvl}}\ /\ 2);}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (nameMorph\ ==\ \textcolor{stringliteral}{"{}undeadSummoner"{}}\ \&\&\ dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>isOpenEnemy(\textcolor{stringliteral}{"{}livingSummoner"{}}))\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().push\_back(}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\textcolor{keyword}{new}\ \mbox{\hyperlink{class_undead_summoner}{UndeadSummoner}}(10,\ enemy-\/>\mbox{\hyperlink{class_unit_aef7e54106b15766c4fb02506b5696522}{Damage}}(),\ enemy-\/>\mbox{\hyperlink{class_unit_a197100c1fcc005df5127de899f5b8329}{getCoords}}(),\ enemy-\/>\mbox{\hyperlink{class_enemy_a5970616d8efe048e0be00f89e0cd1172}{getMaxHp}}(),\ enemy-\/>\mbox{\hyperlink{class_enemy_af409040ad718a0134a9d992226eef73a}{getCurHp}}()),}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(dungeon.\mbox{\hyperlink{class_dungeon_a9f1ba89786b66b244b1f6619112f60e2}{getMapLevel}}()[enemy-\/>\mbox{\hyperlink{class_unit_a197100c1fcc005df5127de899f5b8329}{getCoords}}().second][enemy-\/>\mbox{\hyperlink{class_unit_a197100c1fcc005df5127de899f5b8329}{getCoords}}().first])\});}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ (-\/-\/dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().end())-\/>first-\/>setHeap(\textcolor{keyword}{true});}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ (-\/-\/dungeon.\mbox{\hyperlink{class_dungeon_aec925af840ea11f8ab97ac8487f0b236}{getListEnemies}}().end())-\/>first-\/>setFaction(enemy-\/>\mbox{\hyperlink{class_unit_a34b363b0e3f4bbfcfc650ffd9087de60}{getFaction}}());}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ enemy-\/>\mbox{\hyperlink{class_enemy_afad764b00a84735def86b410b4695a98}{die}}();}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ enemy-\/>\mbox{\hyperlink{class_enemy_a41f96e23f90b6c54499e4e7286b39b9e}{methodAfterDie}}(dungeon);}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ dungeon.\mbox{\hyperlink{class_dungeon_aaba33be6e4ed7fb8bb27b1d7b3afa5f4}{getHero}}().first-\/>getCharacteristics().mana(\mbox{\hyperlink{class_skill_a8ce91c1120a6e8cef5ee1aa2e785380d}{manaCost}}\ *\ \mbox{\hyperlink{class_skill_a3289631b5603b660314d5d449596b252}{skillLvl}}\ /\ 2);}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//GAMELAB3\_MORPHISM\_H}}

\end{DoxyCode}
